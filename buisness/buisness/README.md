# Distinctiveness and Complexity
### Project Overview
For my final project, for CS50's Introduction to Web Programming I decided to develop an invoice generator, that as the name inplies, creates and generates invoices or estimates for users. Compared to all of all of the other projects that we touched upon, none had to do with the use of manipulating PDF's. My project generated the invoices in pdf format, and allows users to fill in fields on a form, that they would like filled. The program is user-friendly to the point, where only providing the date is a requirement, so that users have the flexibility to create invoices with minimal amount of responses needed.

In addition, to the invoice generation feature, another element to the project is a history aspect. After users have created their invoice, they are able to see a history tab where they can view their most recent invoice that was generated. The project does this by prefilling the original form with the fields that were inputted by the user. This is done so if the user has mutitple invoices that contain similar information they don't have to fill out the entire form all over again. The project gets the users most recent form, by storing a session or cookie into the users client browser so that it can keep track of what the user inputted when they submitted their most recent form, which was not done in previous projects. This apporach was taken so that users do not need to create an account in order to create and process invoices.

Mutiple fields are included in the form that users fill out, one of the most notable being a div tag that contains a file type attribute that can store files. Unlike with other projects none had the user of a filetype attribute. Another unique html element that relates to this project is using Bootstrap sliders that conviently allow the user to choose from displaying an invoice or if they would like the pdf to show an estimate, which is stored in the users browser in the form of a session/cookie.

Compared to all of the projects that have been done so far, this project is unqiue and has great complexity. The ecommerce site that was developed has extemtly different so this final project in the way that it does not require users to make accounts, store sessions or cookies inside of the users client or deal with file-type attributes. In addition, the networking project that was done previously, has no resemblence to this project in the way that it doesn't feature features that are in a typical social networking site such as post, likes, and following. Instead my project focues on the user itself and outputting their needs in the form of invoices or estimates in a manner that is flexable and adaptable for the user.

# What each File Contains
Inside of my projects directory, is the basic sturcture of what a typical django web application would look like, first talking about the project directory itself. The project directory contains the usual __init__.py, asgi.py, settings.py, urls.py, and the wsgi.py. All of these files were left unchanged except for the settings.py and the urls.py.

### Settings.py & Urls.py
In settings.py, the installed apps include my web application which in this case is called "final", per django procedure. But the most unique thing on the file is the fact that I added base media and root routes so that when a user sumbits an image it is displayed onto the html/pdf. This was done due to the fact that Django has security procedures involving uploaded images, so implementing those media routes were necessary.

In urls.py of my project's directory there are the usual url routes that are implemented which in this case are the index route which is followed by the "" url which is the base page for when a user visits the web application. Along with this is the usual admin route that directs to the Django Admin Panel.

On the web application directory there is the migrations directory that was not changed at all, a static directiry that coitains a css file for the header of the home/index page, the templates directory that holds all of the django templates, as well as all of the other python files that are associated with the Django framework, including the urls.py, views, admin, and models.py.

# Templates
To begin this list off will be the templates directory that contains a total of five django templates, with the first being layout.html. This html file serves has the layout for all of the other templates, it was built using Bootstrap and serves as the basic structure for the html in the whole project. In addition we have the generate_invoice.html file that contains a html page but with information getting pulled from whatever the user inputted. After that we have the history.html which serves as an exact replica as the invoice.html that we will later see but with its fields already being filled from the users recent submitted form. After that we have index.html that contains the home/index of this project, it to is built using bootstrap components, that directs the user to either the invoice generator or the history page to view to most recent generated invoice or estiamte. Lastly, following that we have invoice.html that contians the form that users will fill out when they wish to create a brand new invoice, it is the same as the history.html but with its fields empty read for the users input.

# Python Files
To begin the explanation of the python files in my Django web application, first is the admin.py which is straightforward with registering the models, so that the admin panel can have access to them.

Next is models.py which has a total of one current model that stores all elements of the invoice fields, such as the company name as well as the company address.

After that we have the urls.py located in my web application directory. In this specific urls.py contains the "" route that leads to the index page which is the home page of the web application. Along with this, the "Invoice" route that generates the form that users submit for generating an invoice, "generate_invoice" route, that is the route that users go to when their invoices are actually created, and the history url route that leads users to the history page where they are able to view their most recent invoice or estimate.

Finally is views.py which is the longest of the python files. In views.py contains four view functions that do different purposes. First is the index view, that just renders the index.html file that was previously discussed. After that is the invoice view, that like the index view renders an html page but this time it is the invoice.html that has rendered. Next we have the genetrate_invoice view which is the most sophistaced out of them all and is the heartbeat of this web application. It first executes if the method of the request is submitted via POST, then trys to execute lines of code. When trying it first gathers all of the users input values that they submitted in the form. During this process, specifically for the logo/image that the user inputs, it says the name and url so that it can be used later to display onto the pdf. From then one, it saves all of that data to the Invoice model by creating an object/distance of that information/data. After that it creates a list called services, that will serve has the "base" for all of the services that the user inputs for their invoice. Next it handles the amount of those services that the user inputs by formatting it using the local libary/moduel. A variable named "total_amount" is set intially to 0 that will keep track for the amount of services that the user inputs. In addition, a field_count variable is set to keep track of the amount of fields that the user dynamically creates when inputting their services. A for loop is then created that executes each time the field_count is increased by one, then variables of quanity, description, and amount, are used to get the users input for each assigned field. An amount variable is created to default to 0 incase the user does not submit any amounts for the service. A formatted_amount variaable is created to format the amount into USD format using the local libary. For each service that the user inputs a dict is created containg key values pairs of quanity, description, and amount. The dict is then appened to the services list that was created earlier due to the fact that the services, contain three fields which are the ones that were previously explained. The total amount is created from the amount of the services there were, and is updated. The total_amount is formated using hte locale libary and is stored in a variable called "formatted_total", that will then be passed to the template later on. After that the percentage the user puts in order to tax their services is made and does the calculation for the user into a variable called "tax_amount", if no tax was inputted it is set to 0. After all of that calculation a variable called "total_amount_with_tax" is created that holds the total amount for the servies added with the taxed amount that was calculated previously. This is also formatted using the locale libary into a variable called "formatted_total_with_tax". After a variable called "recent_invoice" is created to get the latest invoice created, so that it is displayed to the user their invoice incase two or more users are creating an invoice at the same time. From there on, the variable "absolute_image_url" is created that gets the exact url of the image in order to display onto the pdf. Context vvariable is created that contains all of the other variables that were made in order to pass into the template. From there on, the Django session is used in order to store all of the user inputted fields by storing a session/cookie in to the users browser. After that, we get the templtae of the invoice, that is stored in "html_template", and render that into a variable called "rendered_html", passing in all of the values that were made via variable. A pdf is then made from the rendered html via the libary called "weaslyprint" that writes converts an html file into a pdf. After that a response is created that holds the pdf file as well as the content_type. After all of that it returns the response which results in the pdf being generated from the rendered html. At the end of the view is an except block for the try that was mentioned earlier. It excepts a Validation Error and stores it into a variabel called e, that assigns a variable, in this case called "error_message", that holds a str, "Date is Required", and passes that into the invoice.html. In the invoice.html it displays the "error_message", via Django syntax should the user not input a data as that is the only element that is required. After generate_invoice view is the invoice_history view which just renders the history.html passing all of the data that was stored via session/cookie in the generate_invoice.

# Base Directory
In the Base Directory of this project which in this case is called "buisness", besides the project and web application directory are two other dirs, called "logo_images", and "media". Along with these directories is the sqlite file storing the projects database inside of it, the normal manage.py file.

In the logo_images directory and the "media" directory they are just directorys that store images for whatever the user inputs for when uploading a file.

# How to Run
In order to run this Django Web application you would obvously need Django installed, along with this other third-party libarys/moduels that may need to be installed include, weaslyprint and locale.

From there one you would just cd into the projects directory and run the command "python manage.py runserver".
